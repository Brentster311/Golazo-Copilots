# Design Review: WIP-002 - AI Player Option for O

## Summary
Add an optional AI opponent that plays as O, allowing single-player mode while maintaining existing two-player functionality.

## Problem Statement
Currently the game requires two human players. Users want the ability to play alone against a computer opponent.

## Business Case
- **Why now**: Natural progression after WIP-001 completion
- **Impact**: Significantly increases game value by enabling single-player mode
- **KPIs**: AI makes intelligent moves, game remains enjoyable

## Stakeholders
- End user (single player)

## Functional Requirements

1. **AI Toggle Control**
   - Checkbox labeled "Play against AI" or similar
   - Positioned below the game grid, near reset button
   - Default: unchecked (two-player mode)

2. **AI Move Logic**
   - Triggered automatically after human (X) makes a move
   - Only when AI toggle is enabled
   - Only when game is not over
   - Only when it's O's turn

3. **AI Strategy (Priority Order)**
   - Win: If AI can win, take the winning move
   - Block: If human can win next turn, block it
   - Center: Take center if available
   - Corner: Take an available corner
   - Side: Take any available side

4. **AI Move Timing**
   - 500ms delay before AI moves (configurable constant)
   - Status shows "AI is thinking..." during delay

5. **Toggle Behavior**
   - Can toggle at any time
   - If toggled ON during O's turn, AI moves immediately (after delay)
   - If toggled OFF, reverts to two-player mode

## Non-functional Requirements

1. No external dependencies
2. AI responds within 1 second
3. Single file maintained
4. Backward compatible with two-player mode

## Proposed Approach (High Level)

### Class Changes to TicTacToe

```
TicTacToe (extended)
?????????????????????????????????
+ ai_enabled: BooleanVar         # tkinter variable for checkbox
+ ai_checkbox: Checkbutton       # UI control
?????????????????????????????????
+ _create_ai_toggle()            # Create checkbox widget
+ _trigger_ai_move()             # Schedule AI move with delay
+ _make_ai_move()                # Execute AI move
+ _find_best_move()              # AI strategy implementation
+ _find_winning_move(player)     # Helper: find win/block move
```

### AI Strategy Flowchart

```
???????????????????????????????
? AI's Turn (O)               ?
???????????????????????????????
               ?
???????????????????????????????
? Can AI win?                 ???Yes??? Take winning move
???????????????????????????????
               ? No
               ?
???????????????????????????????
? Can human win next?         ???Yes??? Block that move
???????????????????????????????
               ? No
               ?
???????????????????????????????
? Is center empty?            ???Yes??? Take center
???????????????????????????????
               ? No
               ?
???????????????????????????????
? Is any corner empty?        ???Yes??? Take corner
???????????????????????????????
               ? No
               ?
???????????????????????????????
? Take any empty side         ?
???????????????????????????????
```

### UI Layout (Updated)

```
???????????????????????????????
?     Player X's Turn         ?  ? Status label
???????????????????????????????
?    X    ?    O    ?    X    ?
???????????????????????????????  ? 3x3 Button grid
?    O    ?    X    ?    O    ?
???????????????????????????????
?         ?    O    ?    X    ?
???????????????????????????????
?  ? Play against AI          ?  ? NEW: AI toggle checkbox
???????????????????????????????
?      [ New Game ]           ?  ? Reset button
???????????????????????????????
```

## Alternatives Considered

| Option | Pros | Cons | Decision |
|--------|------|------|----------|
| Minimax algorithm | Perfect play | Too hard, not fun | Rejected |
| Random moves | Simple | Not fun | Rejected |
| Priority-based strategy | Balanced, fun | Not perfect | **Selected** |
| Dropdown for AI level | Flexible | Scope creep | Rejected for now |

## Risks and Mitigations

| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| AI too easy | Medium | Medium | Use win/block priority strategy |
| AI too hard | Low | Medium | Don't use minimax |
| Toggle mid-game confusion | Low | Low | Clear status messages |
| Delay feels wrong | Medium | Low | Make delay configurable |

## Open Questions
- None at this time

## Dependencies
- WIP-001 (completed)
- Python 3.x with tkinter (standard library)

## Migration / Rollout / Rollback Plan
- Single file update
- Backward compatible
- Rollback: revert to WIP-001 version

## Observability Plan
- Status label shows AI state ("AI is thinking...")

## Test Strategy Summary
- Unit tests for AI strategy logic
- Unit tests for win detection in AI context
- Unit tests for block detection
- Integration tests for toggle behavior
- Manual tests for timing and UX
