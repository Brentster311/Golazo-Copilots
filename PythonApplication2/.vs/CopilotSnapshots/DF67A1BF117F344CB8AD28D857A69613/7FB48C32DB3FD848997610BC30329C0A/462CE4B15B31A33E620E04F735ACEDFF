"""Language manager for internationalization."""

from typing import List, Dict

TRANSLATIONS: Dict[str, Dict[str, str]] = {
    'en': {
        'new_game': 'New Game',
        'settings': 'Settings',
        'help': 'Help',
        'back': 'Back',
        'player1': 'Player 1',
        'player2': 'Player 2',
        'player1_you': 'Player 1 (You)',
        'trump': 'Trump:',
        'stock': 'Stock:',
        'player_turn': "Player {}'s Turn",
        'game_over': 'Game Over!',
        'end_game': 'End the game?',
        'yes_exit': 'Yes, Exit',
        'cancel': 'Cancel',
        'language': 'Language',
        'lang_english': 'English',
        'lang_chinese': '中文',
        'lang_russian': 'Русский',
        'california_jack': 'California Jack',
        'trick_complete': 'Trick Complete!',
    },
    'zh': {
        'new_game': '新游戏',
        'settings': '设置',
        'help': '帮助',
        'back': '返回',
        'player1': '玩家1',
        'player2': '玩家2',
        'player1_you': '玩家1 (你)',
        'trump': '王牌:',
        'stock': '牌堆:',
        'player_turn': '玩家{}的回合',
        'game_over': '游戏结束!',
        'end_game': '结束游戏?',
        'yes_exit': '是，退出',
        'cancel': '取消',
        'language': '语言',
        'lang_english': 'English',
        'lang_chinese': '中文',
        'lang_russian': 'Русский',
        'california_jack': '加州杰克',
        'trick_complete': '一轮完成!',
    },
    'ru': {
        'new_game': 'Новая игра',
        'settings': 'Настройки',
        'help': 'Помощь',
        'back': 'Назад',
        'player1': 'Игрок 1',
        'player2': 'Игрок 2',
        'player1_you': 'Игрок 1 (Вы)',
        'trump': 'Козырь:',
        'stock': 'Колода:',
        'player_turn': 'Ход игрока {}',
        'game_over': 'Игра окончена!',
        'end_game': 'Завершить игру?',
        'yes_exit': 'Да, выйти',
        'cancel': 'Отмена',
        'language': 'Язык',
        'lang_english': 'English',
        'lang_chinese': '中文',
        'lang_russian': 'Русский',
        'california_jack': 'Калифорния Джек',
        'trick_complete': 'Взятка!',
    },
}


class LanguageManager:
    """Singleton manager for language/translations."""
    
    _instance = None
    LANGUAGES = ['en', 'zh', 'ru']
    
    def __new__(cls):
        if cls._instance is None:
            cls._instance = super().__new__(cls)
            cls._instance._current = 'en'
        return cls._instance
    
    def get(self, key: str) -> str:
        """Get translated string for key."""
        return TRANSLATIONS.get(self._current, {}).get(key, key)
    
    def set_language(self, lang: str) -> None:
        """Set current language."""
        if lang in self.LANGUAGES:
            self._current = lang
    
    def get_current(self) -> str:
        """Get current language code."""
        return self._current
    
    def get_languages(self) -> List[str]:
        """Get list of available language codes."""
        return self.LANGUAGES.copy()


# Global instance for easy import
lang = LanguageManager()
